class n extends HTMLElement{constructor(){super(),this.selectAllInputElements=[],this.itemInputElements=[],this.selectAllButtonElements=[],this.deselectAllButtonElements=[],this.formInputElements=[],this.bulkSelection=[],this.toggleSelection=this.toggleSelection.bind(this),this.selectAll=this.selectAll.bind(this),this.deselectAll=this.deselectAll.bind(this),this.onBulkInputChange=this.onBulkInputChange.bind(this)}toggleActionVisibility(e){const t=this.querySelector("rz-bulk-actions"),l=t?.getAttribute("visibility-class")||"",s=e?"add":"remove";t?.classList[s](l)}toggleSelectedClass(e,t){const l=e.getAttribute("selected-class");if(!l)return;const s=t?"add":"remove";e.classList[s](l)}onBulkInputChange(e){const t=e.currentTarget;t.checked?this.bulkSelection.push(t.value):this.bulkSelection.splice(this.bulkSelection.indexOf(t.value),1),this.bulkSelection.length>0?(this.toggleActionVisibility(!0),this.formInputElements.forEach(l=>{l.value=JSON.stringify(this.bulkSelection)})):this.deselectAll()}toggleSelection(){this.bulkSelection?.length?this.deselectAll():this.selectAll()}selectAll(){this.toggleActionVisibility(!0),this.selectAllInputElements.forEach(e=>{e.checked=!0}),this.itemInputElements.forEach(e=>{e.checked=!0,this.bulkSelection.includes(e.value)||this.bulkSelection.push(e.value)}),this.formInputElements.forEach(e=>{e.value=JSON.stringify(this.bulkSelection)}),this.selectAllButtonElements.forEach(e=>{this.toggleSelectedClass(e,!0)})}deselectAll(){this.toggleActionVisibility(!1),this.selectAllInputElements.forEach(e=>{e.checked=!1}),this.formInputElements.forEach(e=>{e.value=""}),this.itemInputElements.forEach(e=>{e.checked=!1,this.bulkSelection.splice(0,this.bulkSelection.length)}),this.selectAllButtonElements.forEach(e=>{this.toggleSelectedClass(e,!1)})}setQuerySelectorAll(e,t){const l=Array.from(this.querySelectorAll(e));return l?.length&&t&&l.forEach(t),l}connectedCallback(){this.formInputElements=this.setQuerySelectorAll("input.bulk-form-value"),this.selectAllButtonElements=this.setQuerySelectorAll("[data-bulk-select-all-button]",e=>{e.addEventListener("click",this.selectAll)}),this.deselectAllButtonElements=this.setQuerySelectorAll("[data-bulk-deselect-all-button]",e=>{e.addEventListener("click",this.deselectAll)}),this.selectAllInputElements=this.setQuerySelectorAll('input[name="bulk-selection-all"]',e=>{e.addEventListener("change",this.toggleSelection)}),this.itemInputElements=this.setQuerySelectorAll('input[name="bulk-selection[]"]',e=>{e.addEventListener("change",this.onBulkInputChange)})}disconnectedCallback(){this.setQuerySelectorAll("[data-bulk-select-all-button]",e=>{e.removeEventListener("click",this.selectAll)}),this.setQuerySelectorAll("[data-bulk-deselect-all-button]",e=>{e.removeEventListener("click",this.deselectAll)}),this.setQuerySelectorAll('input[name="bulk-selection-all"]',e=>{e.removeEventListener("change",this.toggleSelection)}),this.setQuerySelectorAll('input[name="bulk-selection[]"]',e=>{e.removeEventListener("change",this.onBulkInputChange)})}}export{n as RzBulkSection};
