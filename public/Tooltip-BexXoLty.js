import{a as n,b as h,c as l,f as p,o as r,s as c}from"./Popover-BH-MR4c1.js";const e={text:"tooltip-text",...n},a=Object.values(e);function u(i){return i.getAttribute(e.text)||i.getAttribute("title")}class d{constructor(t){this.tooltip=null,this.tooltipClass="rz-tooltip__content",this.context=null,this.cleanupAutoUpdate=null,this.context=t,this.open=this.open.bind(this),this.close=this.close.bind(this),this.init()}static get observedAttributes(){return[...a]}update(){this.textContent&&(this.tooltip?this.tooltip.textContent=this.textContent:(this.disposeListeners(),this.init()))}get textContent(){return u(this.context)}get options(){const t=this.context.getAttribute(e.placement)||"top",s=this.context.getAttribute(e.shift)||"4",o=this.context.getAttribute(e.offset)||"4";return{placement:t,shift:parseInt(s.toString(),10),offset:parseInt(o.toString(),10)}}init(){const t=this.textContent;t&&(this.context.hasAttribute("title")&&(this.context.removeAttribute("title"),this.context.hasAttribute("aria-label")||this.context.setAttribute("aria-label",t)),this.tooltip&&this.tooltip.remove(),this.tooltip=document.createElement("div"),this.tooltip.classList.add(this.tooltipClass),this.tooltip.setAttribute("role","tooltip"),this.tooltip.textContent=t,this.context.appendChild(this.tooltip),this.initListeners())}open(){this.tooltip?.classList.add(`${this.tooltipClass}--visible`),this.cleanupAutoUpdate?.(),this.cleanupAutoUpdate=h(this.context,this.tooltip,()=>this.updatePosition())}close(){this.tooltip?.classList.remove(`${this.tooltipClass}--visible`),this.cleanupAutoUpdate?.(),this.cleanupAutoUpdate=null}async updatePosition(){if(!this.context||!this.tooltip)return;const{x:t,y:s}=await l(this.context,this.tooltip,{placement:this.options.placement,middleware:[p(),r(this.options.offset),c({crossAxis:!0,padding:this.options.shift})]});Object.assign(this.tooltip.style,{left:`${t}px`,top:`${s}px`})}initListeners(){this.context&&(this.context.addEventListener("mouseenter",this.open),this.context.addEventListener("focus",this.open),this.context.addEventListener("mouseleave",this.close),this.context.addEventListener("blur",this.close))}disposeListeners(){this.context&&(this.context.removeEventListener("mouseenter",this.open),this.context.removeEventListener("focus",this.open),this.context.removeEventListener("mouseleave",this.close),this.context.removeEventListener("blur",this.close))}dispose(){this.close(),this.disposeListeners(),this.tooltip?.remove(),this.tooltip=null}}export{a as A,d as T,u as g};
